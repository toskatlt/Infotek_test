<?php

use yii\db\Migration;

class m250310_000005_insert_test_data extends Migration
{
    public function safeUp()
    {
        // Авторы
        $authors = [
            ['550e8400-e29b-41d4-a716-446655440001', 'Александр Пушкин'],
            ['550e8400-e29b-41d4-a716-446655440002', 'Лев Толстой'],
            ['550e8400-e29b-41d4-a716-446655440003', 'Фёдор Достоевский'],
            ['550e8400-e29b-41d4-a716-446655440004', 'Антон Чехов'],
            ['550e8400-e29b-41d4-a716-446655440005', 'Николай Гоголь'],
            ['550e8400-e29b-41d4-a716-446655440006', 'Иван Тургенев'],
            ['550e8400-e29b-41d4-a716-446655440007', 'Максим Горький'],
            ['550e8400-e29b-41d4-a716-446655440008', 'Сергей Есенин'],
            ['550e8400-e29b-41d4-a716-446655440009', 'Владимир Маяковский'],
            ['550e8400-e29b-41d4-a716-446655440010', 'Михаил Булгаков'],
        ];
        $this->batchInsert('authors', ['uuid', 'name'], $authors);

        // Книги
        $books = [
            ['660e8400-e29b-41d4-a716-446655440011', 'Евгений Онегин', 1833, 'Роман в стихах.', '978-5-389-07454-1'],
            ['660e8400-e29b-41d4-a716-446655440012', 'Война и мир', 1869, 'Эпопея о войне 1812 года.', '978-5-17-118366-4'],
            ['660e8400-e29b-41d4-a716-446655440013', 'Преступление и наказание', 1866, 'Роман о Раскольникове.', '978-5-17-080985-5'],
            ['660e8400-e29b-41d4-a716-446655440014', 'Анна Каренина', 1877, 'Роман о трагической любви.', '978-5-17-089321-9'],
            ['660e8400-e29b-41d4-a716-446655440015', 'Стихи', 1925, 'Сборник стихотворений.', '978-5-17-074365-2'],
            ['660e8400-e29b-41d4-a716-446655440016', 'Мастер и Маргарита', 1967, 'Роман о добре и зле.', '978-5-389-07455-8'],
            ['660e8400-e29b-41d4-a716-446655440017', 'Человек в футляре', 1898, 'Рассказ о закрытом человеке.', '978-5-389-07633-0'],
            ['660e8400-e29b-41d4-a716-446655440018', 'Мёртвые души', 1842, 'Сатирическое произведение.', '978-5-17-087127-2'],
            ['660e8400-e29b-41d4-a716-446655440019', 'Белая гвардия', 1925, 'Роман о Гражданской войне.', '978-5-17-089321-8'],
            ['660e8400-e29b-41d4-a716-446655440020', 'Обломов', 1859, 'Роман о русском барине.', '978-5-17-094221-3'],
        ];
        $this->batchInsert('books', ['uuid', 'title', 'year', 'description', 'isbn'], $books);

        // Добавление связей между книгами и авторами через UUID
        $bookAuthors = [
            ['660e8400-e29b-41d4-a716-446655440011', '550e8400-e29b-41d4-a716-446655440001'],
            ['660e8400-e29b-41d4-a716-446655440012', '550e8400-e29b-41d4-a716-446655440002'],
            ['660e8400-e29b-41d4-a716-446655440012', '550e8400-e29b-41d4-a716-446655440003'],
            ['660e8400-e29b-41d4-a716-446655440013', '550e8400-e29b-41d4-a716-446655440003'],
            ['660e8400-e29b-41d4-a716-446655440014', '550e8400-e29b-41d4-a716-446655440002'],
            ['660e8400-e29b-41d4-a716-446655440015', '550e8400-e29b-41d4-a716-446655440008'],
            ['660e8400-e29b-41d4-a716-446655440016', '550e8400-e29b-41d4-a716-446655440010'],
            ['660e8400-e29b-41d4-a716-446655440017', '550e8400-e29b-41d4-a716-446655440004'],
            ['660e8400-e29b-41d4-a716-446655440018', '550e8400-e29b-41d4-a716-446655440005'],
            ['660e8400-e29b-41d4-a716-446655440019', '550e8400-e29b-41d4-a716-446655440010'],
            ['660e8400-e29b-41d4-a716-446655440020', '550e8400-e29b-41d4-a716-446655440006'],
            ['660e8400-e29b-41d4-a716-446655440020', '550e8400-e29b-41d4-a716-446655440007'],
        ];
        $this->batchInsert('book_author', ['book_uuid', 'author_uuid'], $bookAuthors);
    }

    public function safeDown()
    {
        $this->delete('book_author', []);
        $this->delete('books', []);
        $this->delete('authors', []);
    }
}